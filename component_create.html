<!DOCTYPE html>
<html lang="ja" data-theme="light">

<head>
    <meta charset="UTF-8" />
    <title>éƒ¨å“æ–°è¦ç™»éŒ²</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="theme.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="p-6 bg-[var(--color-bg)] text-[var(--color-text)]">
    <header class="flex justify-between items-center mb-6 pb-4 border-b border-[var(--color-border)]">
        <h1 class="text-2xl font-bold">éƒ¨å“æ–°è¦ç™»éŒ²</h1>
        <button id="themeToggle"
            class="px-4 py-2 rounded border border-[var(--color-border)] bg-[var(--color-bg)] font-bold text-xl">ğŸŒ™</button>
    </header>

    <form id="componentForm" class="space-y-6">
        <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="bg-[var(--color-card-even)] rounded-lg shadow p-4">
            <h2 class="text-xl font-bold border-l-4 border-[var(--color-primary)] pl-2 mb-4">åŸºæœ¬æƒ…å ±</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
                <div class="flex flex-col items-center mb-4">
                    <label class="block mb-2">éƒ¨å“ç”»åƒ</label>
                    <div class="w-[150px] h-[150px] flex items-center justify-center border border-[var(--color-border)] rounded bg-[var(--color-bg-alt)] mb-2 overflow-hidden">
                        <img id="previewImage" src="https://placehold.co/150x150?text=No+Image" alt="éƒ¨å“ç”»åƒ" class="object-contain w-[150px] h-[150px]" />
                    </div>
                    <input type="file" id="imageInput" accept="image/*" class="input-text" />
                </div>
                <!-- åˆ†é¡ -->
                <div>
                    <label class="block mb-2">åˆ†é¡</label>
                    <select class="input-text" id="category">
                        <option>æŠµæŠ—</option>
                        <option>ã‚³ãƒ³ãƒ‡ãƒ³ã‚µ</option>
                        <option>IC</option>
                    </select>
                    <button type="button" id="addCategoryBtn" class="mt-2 btn btn-primary text-sm px-2 py-1">
                        + æ–°è¦åˆ†é¡è¿½åŠ 
                    </button>
                </div>
                <!-- åŸºæœ¬é …ç›® -->
                <div class="grid grid-cols-1 gap-2 md:col-span-2">
                    <input type="text" placeholder="éƒ¨å“å" class="input-text" required>
                    <input type="text" placeholder="å‹ç•ª" class="input-text" required>
                    <input type="text" placeholder="ãƒ¡ãƒ¼ã‚«ãƒ¼" class="input-text">
                </div>
            </div>
        </section>

        <!-- ã‚¹ãƒšãƒƒã‚¯æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="bg-[var(--color-card-even)] rounded-lg shadow p-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold border-l-4 border-[var(--color-primary)] pl-2">ã‚¹ãƒšãƒƒã‚¯æƒ…å ±</h2>
                <button type="button" id="addSpecBtn" class="btn btn-primary text-sm px-2 py-1">
                    + ã‚¹ãƒšãƒƒã‚¯è¿½åŠ 
                </button>
            </div>

            <div id="specContainer" class="space-y-4">
                <!-- åˆæœŸã®å€¤ã¨å˜ä½å…¥åŠ› -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 spec-entry items-center">
                    <select class="input-text spec-type">
                        <option value="value">å€¤</option>
                        <option value="voltage">å®šæ ¼é›»åœ§</option>
                        <option value="current">å®šæ ¼é›»æµ</option>
                        <option value="color">è‰²</option>
                        <option value="tolerance">è¨±å®¹å·®</option>
                        <option value="dimension_x">ã‚µã‚¤ã‚ºï¼ˆå¹…ï¼‰</option>
                        <option value="dimension_y">ã‚µã‚¤ã‚ºï¼ˆé«˜ã•ï¼‰</option>
                        <option value="dimension_z">ã‚µã‚¤ã‚ºï¼ˆå¥¥è¡Œï¼‰</option>
                    </select>
                    <input type="number" placeholder="å€¤" class="input-text spec-value">
                    <select class="input-text spec-unit">
                        <option>Î©</option>
                        <option>kÎ©</option>
                        <option>V</option>
                        <option>mA</option>
                        <option>%</option>
                        <option>mm</option>
                        <option>RGB</option>
                    </select>
                    <button type="button" class="btn btn-primary text-sm px-2 py-1 remove-spec-btn">
                        Ã— å‰Šé™¤
                    </button>
                </div>
            </div>
        </section>

        <!-- åœ¨åº«/ä¾¡æ ¼æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="bg-[var(--color-card-even)] rounded-lg shadow p-4">
            <h2 class="text-xl font-bold border-l-4 border-[var(--color-primary)] pl-2 mb-4">åœ¨åº«/ä¾¡æ ¼æƒ…å ±</h2>

            <div id="supplierContainer">
                <div class="supplier-entry grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <select class="input-text">
                        <option>ç§‹æœˆé›»å­</option>
                        <option>RS</option>
                        <option>Digikey</option>
                    </select>
                    <input type="number" placeholder="ä¾¡æ ¼" class="input-text">
                    <input type="number" placeholder="åœ¨åº«æ•°" class="input-text">
                </div>
            </div>

            <button type="button" id="addSupplierBtn" class="btn btn-primary text-sm px-2 py-1">
                + ä»•å…¥ã‚Œå…ˆè¿½åŠ 
            </button>
        </section>

        <!-- ç”»åƒ/ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
        <section class="bg-[var(--color-card-even)] rounded-lg shadow p-4">
            <h2 class="text-xl font-bold border-l-4 border-[var(--color-primary)] pl-2 mb-4">ç”»åƒ/ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆ</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block mb-2">éƒ¨å“ç”»åƒ</label>
                    <input type="file" accept="image/*" class="input-text">
                </div>
                <div>
                    <label class="block mb-2">ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆ</label>
                    <input type="file" accept=".pdf" class="input-text">
                </div>
            </div>
        </section>

        <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="bg-[var(--color-card-even)] rounded-lg shadow p-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold border-l-4 border-[var(--color-primary)] pl-2">ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰</h2>
                <button type="button" id="addCustomCodeBtn" class="btn btn-primary text-sm px-2 py-1">
                    + ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰è¿½åŠ 
                </button>
            </div>

            <div id="customCodeContainer" class="space-y-4">
                <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã¯å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
            </div>
        </section>

        <!-- ä¿å­˜ãƒœã‚¿ãƒ³ -->
        <div class="text-center mt-6">
            <button type="submit" class="btn btn-primary px-6 py-2 rounded-lg text-white">
                éƒ¨å“ã‚’ç™»éŒ²
            </button>
        </div>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('themeToggle');
            const addSupplierBtn = document.getElementById('addSupplierBtn');
            const supplierContainer = document.getElementById('supplierContainer');
            const addSpecBtn = document.getElementById('addSpecBtn');
            const specContainer = document.getElementById('specContainer');
            const addCustomCodeBtn = document.getElementById('addCustomCodeBtn');
            const customCodeContainer = document.getElementById('customCodeContainer');
            const addCategoryBtn = document.getElementById('addCategoryBtn');
            const categorySelect = document.getElementById('category');

            // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
            themeToggle.addEventListener('click', toggleTheme);

            // ä»•å…¥ã‚Œå…ˆè¿½åŠ 
            addSupplierBtn.addEventListener('click', addSupplierEntry);

            // ã‚¹ãƒšãƒƒã‚¯è¿½åŠ 
            addSpecBtn.addEventListener('click', addSpecEntry);

            // ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰è¿½åŠ 
            addCustomCodeBtn.addEventListener('click', addCustomCodeEntry);

            // åˆ†é¡è¿½åŠ 
            addCategoryBtn.addEventListener('click', function () {
                const newCategoryName = prompt('æ–°ã—ã„åˆ†é¡åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
                if (newCategoryName && newCategoryName.trim() !== '') {
                    const newOption = document.createElement('option');
                    newOption.value = newCategoryName;
                    newOption.textContent = newCategoryName;
                    categorySelect.appendChild(newOption);
                    categorySelect.value = newCategoryName;
                }
            });

            // ã‚¹ãƒšãƒƒã‚¯å‰Šé™¤ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒªã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
            specContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('remove-spec-btn')) {
                    if (confirm('ã“ã®ã‚¹ãƒšãƒƒã‚¯æƒ…å ±ã‚’å‰Šé™¤ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                        e.target.closest('.spec-entry').remove();
                    }
                }
            });

            // ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰å‰Šé™¤ãƒ»é …ç›®è¿½åŠ ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒªã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
            customCodeContainer.addEventListener('click', function (e) {
                if (e.target.classList.contains('remove-custom-code-btn')) {
                    if (confirm('ã“ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                        e.target.closest('.custom-code-entry').remove();
                    }
                }
                if (e.target.classList.contains('add-custom-code-option')) {
                    const select = e.target.closest('.custom-code-entry').querySelector('.custom-code-type');
                    const newItemName = prompt('æ–°ã—ã„ã‚«ã‚¹ã‚¿ãƒ é …ç›®åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
                    if (newItemName && newItemName.trim() !== '') {
                        const newOption = document.createElement('option');
                        newOption.value = newItemName.toLowerCase().replace(/\s+/g, '_');
                        newOption.textContent = newItemName;
                        select.appendChild(newOption);
                        select.value = newOption.value;
                    }
                }
            });

            // ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å‡¦ç†
            const imageInput = document.getElementById('imageInput');
            const previewImage = document.getElementById('previewImage');
            if (imageInput && previewImage) {
                imageInput.addEventListener('change', function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (ev) {
                            previewImage.src = ev.target.result;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        previewImage.src = "https://placehold.co/150x150?text=No+Image";
                    }
                });
            }

            function toggleTheme() {
                const root = document.documentElement;
                const isLight = root.getAttribute('data-theme') === 'light';
                root.setAttribute('data-theme', isLight ? 'dark' : 'light');
                themeToggle.textContent = isLight ? 'â˜€ï¸' : 'ğŸŒ™';
            }

            function addSupplierEntry() {
                const newEntry = document.createElement('div');
                newEntry.className = 'supplier-entry grid grid-cols-1 md:grid-cols-3 gap-4 mb-4';
                newEntry.innerHTML = `
            <select class="input-text">
                <option>ç§‹æœˆé›»å­</option>
                <option>RS</option>
                <option>Digikey</option>
            </select>
            <input type="number" placeholder="ä¾¡æ ¼" class="input-text">
            <input type="number" placeholder="åœ¨åº«æ•°" class="input-text">
        `;
                supplierContainer.appendChild(newEntry);
            }

            // ã‚¹ãƒšãƒƒã‚¯è¿½åŠ é–¢æ•°
            function addSpecEntry() {
                const newEntry = document.createElement('div');
                newEntry.className = 'grid grid-cols-1 md:grid-cols-4 gap-4 spec-entry items-center';
                newEntry.innerHTML = `
                    <select class="input-text spec-type">
                        <option value="value">å€¤</option>
                        <option value="voltage">å®šæ ¼é›»åœ§</option>
                        <option value="current">å®šæ ¼é›»æµ</option>
                        <option value="color">è‰²</option>
                        <option value="tolerance">è¨±å®¹å·®</option>
                        <option value="dimension_x">ã‚µã‚¤ã‚ºï¼ˆå¹…ï¼‰</option>
                        <option value="dimension_y">ã‚µã‚¤ã‚ºï¼ˆé«˜ã•ï¼‰</option>
                        <option value="dimension_z">ã‚µã‚¤ã‚ºï¼ˆå¥¥è¡Œï¼‰</option>
                    </select>
                    <input type="number" placeholder="å€¤" class="input-text spec-value">
                    <select class="input-text spec-unit">
                        <option>Î©</option>
                        <option>kÎ©</option>
                        <option>V</option>
                        <option>mA</option>
                        <option>%</option>
                        <option>mm</option>
                        <option>RGB</option>
                    </select>
                    <button type="button" class="btn btn-primary text-sm px-2 py-1 remove-spec-btn">
                        Ã— å‰Šé™¤
                    </button>
                `;
                specContainer.appendChild(newEntry);

                // ã‚¹ãƒšãƒƒã‚¯ç¨®é¡ã«å¿œã˜ã¦å˜ä½ã‚’å‹•çš„ã«å¤‰æ›´
                newEntry.querySelector('.spec-type').addEventListener('change', function () {
                    const unitSelect = newEntry.querySelector('.spec-unit');
                    const valueInput = newEntry.querySelector('.spec-value');

                    switch (this.value) {
                        case 'value':
                            unitSelect.innerHTML = `
                    <option>Î©</option>
                    <option>kÎ©</option>
                `;
                            valueInput.type = 'number';
                            break;
                        case 'voltage':
                            unitSelect.innerHTML = `
                    <option>V</option>
                    <option>mV</option>
                `;
                            valueInput.type = 'number';
                            break;
                        case 'current':
                            unitSelect.innerHTML = `
                    <option>mA</option>
                    <option>A</option>
                `;
                            valueInput.type = 'number';
                            break;
                        case 'color':
                            unitSelect.innerHTML = `
                    <option>RGB</option>
                    <option>HEX</option>
                `;
                            valueInput.type = 'text';
                            break;
                        case 'tolerance':
                            unitSelect.innerHTML = `
                    <option>%</option>
                `;
                            valueInput.type = 'number';
                            break;
                        case 'dimension_x':
                        case 'dimension_y':
                        case 'dimension_z':
                            unitSelect.innerHTML = `
                    <option>mm</option>
                    <option>cm</option>
                `;
                            valueInput.type = 'number';
                            break;
                    }
                });
            }

            // åˆ†é¡è¿½åŠ é–¢æ•°
            function addCategory() {
                const categorySelect = document.getElementById('category');
                const newCategoryName = prompt('æ–°ã—ã„åˆ†é¡åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');

                if (newCategoryName && newCategoryName.trim() !== '') {
                    const newOption = document.createElement('option');
                    newOption.value = newCategoryName;
                    newOption.textContent = newCategoryName;
                    categorySelect.appendChild(newOption);
                    categorySelect.value = newCategoryName;
                }
            }

            // ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰è¿½åŠ é–¢æ•°
            function addCustomCodeEntry() {
                const newEntry = document.createElement('div');
                newEntry.className = 'grid grid-cols-1 md:grid-cols-4 gap-4 custom-code-entry items-center';
                newEntry.innerHTML = `
                    <select class="input-text custom-code-type">
                        <option value="">é …ç›®ã‚’é¸æŠ</option>
                        <option value="note">å‚™è€ƒ</option>
                        <option value="application">ç”¨é€”</option>
                        <option value="caution">æ³¨æ„ç‚¹</option>
                        <option value="origin">ç™ºæ³¨è€…</option>
                    </select>
                    <input type="text" placeholder="å€¤" class="input-text custom-code-value">
                    <button type="button" class="btn btn-primary text-sm px-2 py-1 add-custom-code-option">
                        + æ–°è¦é …ç›®
                    </button>
                    <button type="button" class="btn btn-primary text-sm px-2 py-1 remove-custom-code-btn">
                        Ã— å‰Šé™¤
                    </button>
                `;
                customCodeContainer.appendChild(newEntry);
            }

            // ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½åŠ 
            document.addEventListener('DOMContentLoaded', () => {
                // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰...

                // åˆ†é¡è¿½åŠ ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
                document.querySelector('button[type="button"]:nth-child(2)').addEventListener('click', addCategory);

                // ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰è¿½åŠ ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
                const addCustomCodeBtn = document.getElementById('addCustomCodeBtn');
                if (addCustomCodeBtn) {
                    addCustomCodeBtn.addEventListener('click', addCustomCodeEntry);
                }

                // ã‚¹ãƒšãƒƒã‚¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
                document.getElementById('specContainer').addEventListener('click', function (e) {
                    if (e.target.classList.contains('remove-spec-btn')) {
                        removeSpecEntry(e.target);
                    }
                });
            });
        });
    </script>
</body>

</html>